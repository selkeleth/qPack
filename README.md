qPack is a toolset to manage podcast files on disk that begin with {title}.mp3, particularly Audiobookshelf mp3's, and make them into manageable, shareable archives. It is intended for Linux users who are comfortable on the CLI but has a TUI, an analysis report, and common archiving options available from the main menu so technically very little CLI knowledge is required. 

qPack has two major tools - qPackRename.sh which is able to directly rename your podcasts named {title}.mp3 into something more useable, like {podcast name} - {release date} - {title} [{year}_MP3/{bit rate}] which also means you can copy and paste the name into the Title _and manually changing the _ to a /_. qPack assumes that your podcast directory has the name that's best for sharing, and the file name as the title that's best for sharing, and it gets the rest of the information it needs from the file's metadata. If you want to make another pack from the same directory at a later date then just run it again and it will skip the files that already have the "[{year}" in the name.

**qPackRename.sh does not have an undo. Use --dry-run until you are sure you want what you see!**

qPack.sh has various options for making torrent data directories using those as source directories and the renamed files, hardlinking (or copying) the cover and files per the user's specifications, syncing it up to a seedbox if the user has one, and putting the .torrent in the user's watch directories if desired. 

Currently staged:
- qPack.sh's in a less than aspiration form is there. Its current state is that
    it can be run with no parameters but a target directory. Use ? to see
    available options and commands such as "o 1" to start jobs. 
    The overview with the functions I am working on:
- qPack.sh: A script that works on a target directory with files that have the
    metadata in the filenames that templates look up from the file. Instead of
    automatically targeting the full directory, it provides options for annual
    torrents, a YTD torrent, and all-prior years to set up a complete history
    that allows for annual packs moving forward. It can be invoked without any
    arguments for a fully interactive mode or with a list of arguments for
    complete CLI automation for advanced users. When an option is selected,
    qPack will create the torrent directory, hardlink (or copy) files to it
- qPackConfig: UI-from-CLI configuration tool
- qPackRename: Rename {title}.mp3 files generated by ABS. Designed to be
    very friendly for adding and changing naming templates. Check out the
    --show-samples option before previewing full output. Use --dry-run with
    new shows. Show creators sometimes change metadata THEY populate.
- qTorSync: A straightforward implementation of the libraries that allow
    qPack to make torrents with the user's configuration, save a useable 
    .torrent file in the save path, optionally the watch path, and optionally
    will sync to the seedbox (and optionally put the .torrent in the seedbox's
    client's .torrent watch directory). 
- Template framework that is friendly for adding templates
- Template framework allow key->value replacement with value that can
    be retrieved via any CLI command, python, etc

Synchronization to seedboxes is done via rsync. Please use ssh-copy-id or a similar tool so that rsync can bypass an interactive login.

Audiobookshelf "duplicate" file warning:
Audiobookshelf, when presented with a second publication of the same title, faces a filename collision. It avoids this by adding the guid as a suffix to subsequent episodes with a title that matches one already in the directory. 
The title being a duplicate does not mean the episode is. Some podcasts publish multiple episodes with the same title. One example I ran across was when Freakonomics did a 5-year-later update on an episode. Audiobookshelf was unable to use its normal title.mp3 so appended an id suffix. Unfortunately, the script does not (yet?) remove this suffix, but it should be possible to test for with reasonable confidence with a regex. The reason I have not done is that I have also seen this behavior when a podcast episode is re-uploaded with a very minor change hours after it was first published without removing the first episode from the RSS feed. I letting them stick out because I'm checking them out on a case-by-case basis. It's usually a matter of removing the suffix and letting the date speak for itself because the title was reused.

Installation and usage:
1. Clone this git
2. Execute qPackConfig.sh
3. Maximize your terminal and try qPackRename.sh --show-samples "Some Audiobookshelf Podcast folder"
4. Try qPackRename.sh -f <your chosen index #> "Podcast folder" --dry-run to get a full preview of proposed new names
5. Run qPackRename without --dry-run when you are satisfied.
6. Rinse and repeat from step 3 or 4, always beginning with --dry-run only

Advanced usage:
qPack has been designed so that main directory .sh files set up an environment and import the operational functions from resources/qWrapper.sh. If so inclined, you can source the resources/qWrapper.sh yourself from the command line and access the operational functions directly or create your own scripts to do so. For instance, you may want the convenience of "sync_to <local_target> <remote_location>" as shorthand for "rsync -azh <local_target> <seedUser>@<seedServer>:<remote_location>", or "sync_to <.torrent> 1" to add any .torrent to your seedbox watch directory. 


Next up:
- Implement more functionality into qPack, such as renaming files or offering
    to run qPackConfig if no config file exists. 
- Implement CLI parameters for "nextJob" options for automated usage
- Implement quality of life options, such as creating the directories only so
    that manual tweaks such as changing directory names won't have to be
    repeated on the seedbox as well as making new .torrent files.
- Have the "nextJob" loop create a job queue instead of executing on each
    selection.
- Add a CLI option to read a file with a list of CLI parameters that amount
    to a list of "nextJob" commands, allowing for automated execution of
    batch jobs.
- Explore options for automated description generation using qTemplates, an
    API integration, metadata, etc. 
- Track first/last episode and other information to add template fields
- Templates for directory names, allow first/last episode in packs to
    to be included in directory and torrent names
